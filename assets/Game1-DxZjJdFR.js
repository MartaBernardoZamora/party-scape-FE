import{r as E,j as q}from"./index-DbiKp2O7.js";const k="/party-scape-FE/assets/bric-C19-9nsN.jpg",B="/party-scape-FE/assets/gizmo-D6wweY10.jpg",G="/party-scape-FE/assets/stripe-ChAD_gLt.jpg",M="/party-scape-FE/assets/inter-DeHZyYmK.png",P="/party-scape-FE/assets/puerta-BPCM4GIW.jpg",Q="/party-scape-FE/assets/m-EH7JknTH.jpg",W="/party-scape-FE/assets/o-C96I0Q4i.jpg",J="/party-scape-FE/assets/g-BheW18gK.jpg",K="/party-scape-FE/assets/w-DgZzkHFg.jpg",T="/party-scape-FE/assets/a-CxQLgTJX.jpg",Z="/party-scape-FE/assets/i-QFUiYI6-.jpg";function N(u){const Y=()=>[[1,2,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0],...Array.from({length:7},()=>Array(9).fill(0))],[m,j]=E.useState(Y()),[r,L]=E.useState(null);E.useEffect(()=>{(a=>{const t=[];let n=0;a.forEach((c,o)=>{const s=new Image;s.src=c,s.onload=()=>{n++,n===a.length&&L(t)},t[o]=s})})([k,B,G,M,P,Q,W,J,K,T,Z])},[]),E.useEffect(()=>{if(!r||!u.canvasRef.current)return;const e=u.canvasRef.current,a=e.getContext("2d"),t=e.width/9,n=h(r[0],t),c=h(r[1],t),o=h(r[3],t),s=h(r[4],t),l=[[0,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1],[1,1,0,1,0,0,0,1,1],[1,1,0,1,0,1,0,1,1],[1,1,0,1,0,1,0,0,1],[1,1,0,0,0,1,1,0,1],[1,1,1,1,1,1,1,0,1],[1,1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,0]];R(a,t,m,n,c,o,s);const g=i=>{var A,x;const d=u.canvasRef.current;if(!d)return;const y=d.getBoundingClientRect();let I,w;i.type==="touchstart"?(i.preventDefault(),I=i.touches[0].clientX,w=i.touches[0].clientY):i.type==="mousedown"&&(I=i.clientX,w=i.clientY);const C=I-y.left,F=w-y.top,v=d.width/9;let p=Math.floor(C/v),f=Math.floor(F/v);((A=m[p])==null?void 0:A[f])===2&&l[p][f]===0&&D(p,f),((x=m[p])==null?void 0:x[f])===2&&l[p][f]===1&&H(p,f)};return e.addEventListener("touchstart",g,{passive:!1}),e.addEventListener("mousedown",g),()=>{e.removeEventListener("touchstart",g),e.removeEventListener("mousedown",g)}},[r,m]),E.useEffect(()=>{if(m[8][8]===1){for(let e=0;e<9;e++)for(let a=0;a<9;a++)m[e][a]===2&&(m[e][a]=0);S(8,8)}},[m]);const h=(e,a)=>{const t=document.createElement("canvas");return t.width=a,t.height=a,t.getContext("2d").drawImage(e,0,0,a,a),t},R=(e,a,t,n,c,o,s)=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height);for(let l=0;l<9;l++)for(let g=0;g<9;g++){const i=l*a,d=g*a;t[l][g]===1?e.drawImage(c,i,d,a,a):t[l][g]===3?(e.fillStyle="white",e.fillRect(i,d,a,a)):l===8&&g===8?e.drawImage(s,i,d):t[l][g]===2?(e.drawImage(n,i,d),e.drawImage(o,i,d)):e.drawImage(n,i,d)}},D=(e,a)=>{j(t=>{const n=t.map(o=>o.slice());for(let o=0;o<9;o++)for(let s=0;s<9;s++)n[o][s]===1&&(n[o][s]=3),n[o][s]===2&&(n[o][s]=0);n[e][a]=1;const c=(o,s)=>{o>=0&&o<9&&s>=0&&s<9&&n[o][s]===0&&(n[o][s]=2)};return c(e-1,a),c(e+1,a),c(e,a-1),c(e,a+1),n})},X=({image:e,startX:a,startY:t,onEnd:n})=>{const c=u.canvasRef.current,o=c.getContext("2d"),s=c.width/9;let l=1,g=a*s,i=t*s;const d=c.width/s,y=0,I=0,w=()=>{const C=s*l,F=s*l,v=(l-1)/(d-1),p=g+(y-g)*v,f=i+(I-i)*v;o.drawImage(e,p,f,C,F),l+=.1,l<d?requestAnimationFrame(w):n()};requestAnimationFrame(w)},S=(e,a)=>{X({image:r[1],startX:e,startY:a,onEnd:()=>{const t=u.canvasRef.current,n=t.getContext("2d"),c=t.width/9;n.drawImage(r[1],0,0,t.width,t.height),n.clearRect(0,0,t.width,t.height);const o=h(r[0],c),s=h(r[1],c);R(n,c,m,o,s),b()}})},H=(e,a)=>{X({image:r[2],startX:e,startY:a,onEnd:()=>{alert("¡Stripe te ha atrapado! Inténtalo de nuevo."),j(Y())}})},b=()=>{const e=u.canvasRef.current,a=e.getContext("2d"),t=e.width/9;a.drawImage(r[5],1*t,1*t,t,t),a.drawImage(r[6],4*t,2*t,t,t),a.drawImage(r[7],5*t,4*t,t,t),a.drawImage(r[8],3*t,6*t,t,t),a.drawImage(r[9],4*t,7*t,t,t),a.drawImage(r[10],7*t,7*t,t,t)};return q.jsx("p",{children:"Gizmo nos quiere mostrar los primeros pasos del camino, acompañémosle. Cuidado, que Stripe ya se ha saltado las reglas..."})}export{N as default};
